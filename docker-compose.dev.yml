# Development Docker Compose
# This runs only Calibre service for Windows development
# The main app runs locally with DATA_PATH=./data in .env.local

services:
  calibre:
    build:
      context: .
      dockerfile: Dockerfile.calibre
    container_name: booker-calibre-dev
    restart: unless-stopped
    ports:
      - "${CALIBRE_PORT:-8081}:8080"  # Calibre HTTP API
    volumes:
      # Mount local data folder (uses DATA_PATH from .env or default)
      - ${DATA_PATH:-./data}:/data
    environment:
      - CALIBRE_LIBRARY_PATH=/data/books
    networks:
      - booker-dev

networks:
  booker-dev:
    driver: bridge
